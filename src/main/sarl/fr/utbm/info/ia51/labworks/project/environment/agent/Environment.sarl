package fr.utbm.info.ia51.labworks.project.environment.^agent

import io.sarl.core.Initialize
import fr.utbm.info.ia51.labworks.project.ui.SimUI
import io.sarl.core.DefaultContextInteractions
import io.sarl.core.Lifecycle

agent Environment {
	uses RoadManager, DefaultContextInteractions, Lifecycle
	
	var UI : SimUI
	
	on Initialize {
		var nbCar : int = occurrence.parameters.get(0) as Integer
		synchronized (this) {
			this.UI = occurrence.parameters.get(1) as SimUI
		}
		setSkill(new RoadManagerSkill())

		for (i : 0 ..< nbCar) {
			var carBody = createCar()
			spawnInContextWithID(typeof(Car), carBody.agentId, defaultContext)
		}
	}
	
}